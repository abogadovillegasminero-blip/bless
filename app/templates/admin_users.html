<!DOCTYPE html>
<html>
<head>
  <title>Admin - Usuarios</title>
</head>
<body style="font-family: Arial; background:#f4f6f8; padding:24px;">

  <div style="max-width: 760px; margin:auto; background:white; padding:18px; border-radius:12px; box-shadow: 0 8px 20px rgba(0,0,0,0.08);">
    <h2 style="margin-top:0;">ğŸ‘¤ AdministraciÃ³n de Usuarios</h2>
    <div style="color:#555; margin-bottom:12px;">
      SesiÃ³n: <b>{{ user.username }}</b> ({{ user.role }})
    </div>

    {% if ok %}
      <div style="background:#e7fff0; border:1px solid #a6f0c0; color:#126b2f; padding:10px 12px; border-radius:10px; margin-bottom:12px;">
        âœ… Usuario creado correctamente.
      </div>
    {% endif %}

    {% if error == "exists" %}
      <div style="background:#ffe2e2; border:1px solid #ffb3b3; color:#8a1f1f; padding:10px 12px; border-radius:10px; margin-bottom:12px;">
        âŒ Ya existe un usuario con ese nombre.
      </div>
    {% elif error == "missing" %}
      <div style="background:#ffe2e2; border:1px solid #ffb3b3; color:#8a1f1f; padding:10px 12px; border-radius:10px; margin-bottom:12px;">
        âŒ Debes escribir usuario y contraseÃ±a.
      </div>
    {% elif error == "role" %}
      <div style="background:#ffe2e2; border:1px solid #ffb3b3; color:#8a1f1f; padding:10px 12px; border-radius:10px; margin-bottom:12px;">
        âŒ Rol invÃ¡lido. Solo se permite admin o user.
      </div>
    {% endif %}

    <form method="post" action="/admin/usuarios/crear" style="display:flex; gap:10px; flex-wrap:wrap; align-items:flex-end; margin-bottom:18px;">
      <div>
        <label><b>Usuario</b></label><br>
        <input name="username" required style="padding:8px; border-radius:8px; border:1px solid #ddd;">
      </div>

      <div>
        <label><b>ContraseÃ±a</b></label><br>
        <input type="password" name="password" required style="padding:8px; border-radius:8px; border:1px solid #ddd;">
      </div>

      <div>
        <label><b>Rol</b></label><br>
        <select name="role" required style="padding:8px; border-radius:8px; border:1px solid #ddd;">
          <option value="user">user</option>
          <option value="admin">admin</option>
        </select>
      </div>

      <button type="submit" style="padding:10px 14px; border:0; border-radius:10px; background:#2c7be5; color:white; font-weight:bold; cursor:pointer;">
        Crear usuario
      </button>
    </form>

    <h3 style="margin: 0 0 10px 0;">ğŸ“‹ Usuarios actuales</h3>

    <table style="width:100%; border-collapse:collapse; background:white;">
      <tr style="background:#222; color:white;">
        <th style="padding:10px; text-align:left;">Usuario</th>
        <th style="padding:10px; text-align:left;">Rol</th>
      </tr>
      {% for u in usuarios %}
      <tr style="border-bottom:1px solid #eee;">
        <td style="padding:10px;">{{ u.username }}</td>
        <td style="padding:10px;"><b>{{ u.role }}</b></td>
      </tr>
      {% endfor %}
    </table>

    <div style="margin-top:16px;">
      <a href="/" style="display:inline-block; padding:10px 14px; background:#6c757d; color:white; text-decoration:none; border-radius:10px; font-weight:bold;">
        â¬… Volver
      </a>
      <a href="/logout" style="display:inline-block; padding:10px 14px; background:#dc3545; color:white; text-decoration:none; border-radius:10px; font-weight:bold; margin-left:8px;">
        ğŸ”’ Cerrar sesiÃ³n
      </a>
    </div>
  </div>

</body>
</html>
