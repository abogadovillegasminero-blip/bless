{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="m-0">ðŸ‘¤ Cliente</h2>
  <div class="d-flex gap-2">
    <a class="btn btn-secondary btn-sm" href="/clientes">â¬… Volver</a>
    <a class="btn btn-success btn-sm" href="/pagos?cedula={{ cliente.cedula }}">âž• Registrar pago</a>
  </div>
</div>

<div class="card p-3 mb-3">
  <div class="row g-3">
    <div class="col-md-4">
      <div class="text-muted">Nombre</div>
      <div style="font-weight:800">{{ cliente.nombre }}</div>
    </div>
    <div class="col-md-4">
      <div class="text-muted">CÃ©dula</div>
      <div style="font-weight:800">{{ cliente.cedula }}</div>
    </div>
    <div class="col-md-4">
      <div class="text-muted">TelÃ©fono</div>
      <div style="font-weight:800">{{ cliente.telefono }}</div>
    </div>

    <div class="col-md-4">
      <div class="text-muted">Tipo cobro</div>
      <div style="font-weight:800">{{ cliente.tipo_cobro }}</div>
    </div>
    <div class="col-md-4">
      <div class="text-muted">PrÃ©stamo</div>
      <div style="font-weight:800">$ {{ "{:,.0f}".format(cliente.prestamo|float).replace(",", ".") }}</div>
    </div>
    <div class="col-md-4">
      <div class="text-muted">Pagado</div>
      <div style="font-weight:800">$ {{ "{:,.0f}".format(cliente.pagado|float).replace(",", ".") }}</div>
    </div>

    <div class="col-md-4">
      <div class="text-muted">Saldo</div>
      <div style="font-weight:900; font-size:18px;">
        $ {{ "{:,.0f}".format(cliente.saldo|float).replace(",", ".") }}
      </div>
    </div>
  </div>
</div>

<div class="card p-3">
  <h5 class="mb-3">ðŸ“„ Pagos del cliente</h5>

  <table class="table table-bordered bg-white m-0">
    <thead>
      <tr>
        <th>Fecha</th>
        <th>Valor</th>
        <th>Tipo cobro</th>
      </tr>
    </thead>
    <tbody>
      {% if pagos|length == 0 %}
        <tr><td colspan="3" class="text-center">Este cliente no tiene pagos</td></tr>
      {% endif %}

      {% for p in pagos %}
      <tr>
        <td>{{ p["fecha"] }}</td>
        <td>$ {{ "{:,.0f}".format(p["valor"]|float).replace(",", ".") }}</td>
        <td>{{ p["tipo_cobro"] }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

{% endblock %}
