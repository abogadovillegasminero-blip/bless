{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="m-0">✏️ Editar movimiento</h2>
  <a class="btn btn-secondary btn-sm" href="/pagos">⬅ Volver</a>
</div>

<form method="post" action="/pagos/editar/{{ pago.id }}" class="card p-3">
  <div class="row g-3">

    <div class="col-md-6">
      <label class="form-label">Cliente</label>
      <select name="cliente_id" class="form-control" required>
        {% for c in clientes %}
          <option value="{{ c.id }}" {% if c.id == pago.cliente_id %}selected{% endif %}>
            {{ c.nombre }}
          </option>
        {% endfor %}
      </select>
    </div>

    <div class="col-md-3">
      <label class="form-label">Valor</label>
      <input type="number" name="valor" class="form-control" required min="0" step="0.01"
             value="{{ pago.valor }}">
      <div class="form-text">
        Si eliges <b>Préstamo</b>, se recalcula <b>seguro 10%</b> y <b>20% mensual</b>.
      </div>
    </div>

    <div class="col-md-3">
      <label class="form-label">Fecha</label>
      <input type="date" name="fecha" class="form-control" required value="{{ pago.fecha }}">
    </div>

    <div class="col-md-3">
      <label class="form-label">Tipo</label>
      <select name="tipo" class="form-control" required>
        <option value="abono" {% if (pago.tipo or "").lower() == "abono" %}selected{% endif %}>Abono</option>
        <option value="prestamo" {% if (pago.tipo or "").lower() == "prestamo" %}selected{% endif %}>Préstamo</option>
      </select>
    </div>

    <div class="col-md-9">
      <label class="form-label">Nota</label>
      <input type="text" name="nota" class="form-control" value="{{ pago.nota or '' }}">
    </div>

    <div class="col-md-3 d-flex align-items-end">
      <button class="btn btn-primary w-100">Guardar cambios</button>
    </div>

  </div>
</form>

{% endblock %}
