{% extends "base.html" %}
{% block content %}

<h2>Clientes</h2>

<form method="post" action="/clientes/guardar" class="card p-3 mb-4">
  <div class="row">
    <div class="col">
      <input name="nombre" class="form-control" placeholder="Nombre" required>
    </div>
    <div class="col">
      <input name="cedula" class="form-control" placeholder="Cédula" required>
    </div>
    <div class="col">
      <input name="telefono" class="form-control" placeholder="Teléfono" required>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col">
      <input name="monto" type="number" class="form-control" placeholder="Monto" required>
    </div>
    <div class="col">
      <select name="tipo_cobro" class="form-control" required>
        <option value="">Tipo de cobro</option>
        <option value="diario">Diario</option>
        <option value="semanal">Semanal</option>
      </select>
    </div>
    <div class="col">
      <button class="btn btn-primary w-100">Guardar</button>
    </div>
  </div>
</form>

<table class="table table-bordered bg-white">
  <thead>
    <tr>
      <th>Nombre</th>
      <th>Cédula</th>
      <th>Teléfono</th>
      <th>Monto</th>
      <th>Tipo cobro</th>
      <th style="width:170px;">Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% if clientes|length == 0 %}
      <tr><td colspan="6" class="text-center">No hay clientes</td></tr>
    {% endif %}

    {% for c in clientes %}
    <tr>
      <td>{{ c["nombre"] }}</td>
      <td>{{ c["cedula"] }}</td>
      <td>{{ c["telefono"] }}</td>
      <td>$ {{ "{:,.0f}".format(c["monto"]|float).replace(",", ".") }}</td>
      <td>{{ c["tipo_cobro"] }}</td>
      <td>
        <a class="btn btn-warning btn-sm w-100 mb-1" href="/clientes/editar?row_id={{ loop.index0 }}">Editar</a>

        <form method="post" action="/clientes/eliminar" onsubmit="return confirm('¿Eliminar este cliente?');">
          <input type="hidden" name="row_id" value="{{ loop.index0 }}">
          <button class="btn btn-danger btn-sm w-100">Eliminar</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
