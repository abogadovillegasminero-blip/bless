<!-- templates/saldos.html -->
{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="m-0">üìå Saldos</h2>
  <a class="btn btn-outline-danger btn-sm" href="/alertas/mora">Ver alertas de mora</a>
</div>

<div class="card p-3">
  <div class="table-responsive">
    <table class="table table-sm table-striped align-middle">
      <thead>
        <tr>
          <th>Cliente</th>
          <th>Documento</th>
          <th>Tel√©fono</th>
          <th>Frecuencia</th>
          <th>Saldo base</th>
          <th>Inter√©s estimado</th>
          <th>Total deuda</th>
          <th>Mora</th>
        </tr>
      </thead>
      <tbody>
        {% for r in rows %}
          <tr>
            <td>{{ r.nombre }}</td>
            <td>{{ r.documento or "" }}</td>
            <td>{{ r.telefono or "" }}</td>
            <td>{{ (r.frecuencia or "mensual")|capitalize }}</td>
            <td>{{ "%.2f"|format(r.saldo_base) }}</td>
            <td>{{ "%.2f"|format(r.interes_estimado) }}</td>
            <td><strong>{{ "%.2f"|format(r.total_deuda) }}</strong></td>
            <td>
              {% if r.en_mora %}
                <span class="badge bg-danger">En mora ({{ r.mora_dias }} d√≠as)</span>
              {% else %}
                <span class="badge bg-success">Al d√≠a</span>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
        {% if rows|length == 0 %}
          <tr><td colspan="8" class="text-center text-muted">Sin datos</td></tr>
        {% endif %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
