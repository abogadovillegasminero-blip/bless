{% extends "base.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
    <h2 class="m-0">ğŸ“Š Dashboard</h2>
    <div class="text-muted">
      SesiÃ³n: <b>{{ user.username }}</b> (rol: <b>{{ user.role }}</b>)
    </div>
  </div>
  <a href="/logout" class="btn btn-outline-danger btn-sm">ğŸ”’ Cerrar sesiÃ³n</a>
</div>

{% set es_admin = (user.role == "admin") %}

<div class="row g-3">

  <!-- âœ… Para TODOS: Clientes -->
  <div class="col-12 col-md-6">
    <a href="/clientes" class="text-decoration-none">
      <div class="card p-4 h-100">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="text-muted">GestiÃ³n</div>
            <div class="fs-4 fw-bold">ğŸ‘¥ Clientes</div>
            {% if not es_admin %}
              <div class="small text-muted mt-1">Solo consulta y registro bÃ¡sico</div>
            {% endif %}
          </div>
          <span class="badge bg-primary fs-6">Abrir</span>
        </div>
      </div>
    </a>
  </div>

  <!-- âœ… Para TODOS: Pagos -->
  <div class="col-12 col-md-6">
    <a href="/pagos" class="text-decoration-none">
      <div class="card p-4 h-100">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="text-muted">OperaciÃ³n</div>
            <div class="fs-4 fw-bold">ğŸ’µ Pagos</div>
            {% if not es_admin %}
              <div class="small text-muted mt-1">Registrar abonos y prÃ©stamos</div>
            {% endif %}
          </div>
          <span class="badge bg-success fs-6">Abrir</span>
        </div>
      </div>
    </a>
  </div>

  {% if es_admin %}
  <!-- âœ… Solo ADMIN: Saldos -->
  <div class="col-12 col-md-6">
    <a href="/saldos" class="text-decoration-none">
      <div class="card p-4 h-100">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="text-muted">AnÃ¡lisis</div>
            <div class="fs-4 fw-bold">ğŸ“Œ Saldos</div>
          </div>
          <span class="badge bg-dark fs-6">Abrir</span>
        </div>
      </div>
    </a>
  </div>

  <!-- âœ… Solo ADMIN: Reportes -->
  <div class="col-12 col-md-6">
    <a href="/reportes" class="text-decoration-none">
      <div class="card p-4 h-100">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="text-muted">Admin</div>
            <div class="fs-4 fw-bold">ğŸ“ˆ Reportes</div>
          </div>
          <span class="badge bg-info text-dark fs-6">Abrir</span>
        </div>
      </div>
    </a>
  </div>

  <!-- âœ… Solo ADMIN: Usuarios -->
  <div class="col-12 col-md-6">
    <a href="/admin/usuarios" class="text-decoration-none">
      <div class="card p-4 h-100">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="text-muted">Admin</div>
            <div class="fs-4 fw-bold">ğŸ‘¤ Usuarios</div>
          </div>
          <span class="badge bg-warning text-dark fs-6">Abrir</span>
        </div>
      </div>
    </a>
  </div>
  {% else %}

  <!-- âœ… Para cobradores: aviso simple -->
  <div class="col-12">
    <div class="alert alert-info mb-0">
      <b>Modo colaborador:</b> puedes registrar pagos y consultar clientes.
      Para ver saldos, reportes y usuarios, debe ingresar un administrador.
    </div>
  </div>

  {% endif %}

</div>

{% endblock %}
